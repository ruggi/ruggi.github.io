<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deploying md on GitHub pages</title>
    <link rel="stylesheet" type="text/css" href="/style.css" />
  </head>
  <body>
    <div class="wrap">
      
      <div class="top">
        <a href="/">~</a>
        
        <span><a href="/blog">blog</a></span> 
      </div>
      
      <div class="main">
        <div class="meta">
          
          Fri May 28, 2021 
        </div>
        <h1 id="deploying-md-on-github-pages">Deploying md on GitHub pages</h1>
<p>I spent the last couple days building <a href="https://github.com/ruggi/md">md</a>, a minimal Markdown static site generator.</p>
<p>This site is generated by <code>md</code>, and it's deployed on GitHub Pages using a simple GitHub Action:</p>
<pre style="color:#f8f8f2;background-color:#282a36"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#ff79c6">name</span>: build
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">on</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">push</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>    <span style="color:#ff79c6">branches</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>      - main
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#ff79c6">jobs</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">deploy</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>    <span style="color:#ff79c6">runs-on</span>: ubuntu<span style="color:#bd93f9">-18.04</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>    <span style="color:#ff79c6">steps</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>      - <span style="color:#ff79c6">uses</span>: actions/checkout@v2
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>      - <span style="color:#ff79c6">name</span>: Install Go
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>        <span style="color:#ff79c6">uses</span>: actions/setup-go@v2
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>        <span style="color:#ff79c6">with</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>          <span style="color:#ff79c6">go-version</span>: <span style="color:#f1fa8c">&#34;^1.16.2&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>      - <span style="color:#ff79c6">name</span>: Install md
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>        <span style="color:#ff79c6">run</span>: go get github.com/ruggi/md
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>      - <span style="color:#ff79c6">name</span>: Build
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>        <span style="color:#ff79c6">run</span>: md build
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>      - <span style="color:#ff79c6">name</span>: Deploy
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>        <span style="color:#ff79c6">uses</span>: peaceiris/actions-gh-pages@v3
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>        <span style="color:#ff79c6">if</span>: github.ref == <span style="color:#f1fa8c">&#39;refs/heads/main&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>        <span style="color:#ff79c6">with</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span>          <span style="color:#ff79c6">github_token</span>: ${{ secrets.GITHUB_TOKEN }}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>          <span style="color:#ff79c6">publish_dir</span>: ./.md/out
</pre><h2 id="steps">Steps</h2>
<p>The steps are pretty simple:</p>
<ol>
<li>Install Go via <code>actions/setup-go@v2</code></li>
<li>Install md via <code>go get</code></li>
<li>Build the local folder</li>
<li>Deploy with <code>peaceiris/actions-gh-pages</code></li>
</ol>
<h2 id="repo-config">Repo config</h2>
<p>Once the action runs, it will publish the output folder (<code>./.md/out</code>) on the <code>gh-pages</code> branch. You can set that to be the target for the deployment in the <code>Pages</code> section of the repository's settings:</p>
<p><img src="/images/gh-pages-deploy.png" alt="settings" /></p>

      </div>
    </div>
  </body>
</html>
