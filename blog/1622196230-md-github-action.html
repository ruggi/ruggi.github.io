<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deploying md on GitHub pages</title>
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <script async defer data-domain="ruggi.github.io" src="https://plausible.ruggi.xyz/js/plausible.js"></script>
  </head>
  <body>
    <div class="wrap">
      <div class="top">
        <a class="" href="/">Home</a>
        <a class="" href="/projects.html">Projects</a>
        <a class="" href="/3d-prints.html">3D Prints</a>
      </div>
      <div class="main"><h1 id="deploying-md-on-github-pages">Deploying md on GitHub pages</h1>
<p>I spent the last couple days building <a href="https://github.com/ruggi/md">md</a>, a minimal Markdown static site generator.</p>
<p>This site is generated by <code>md</code>, and it's deployed on GitHub Pages using a simple GitHub Action:</p>
<pre style="background-color:#fff"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>build<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">on</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">push</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">branches</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#bbb">      </span>- main<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">jobs</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">deploy</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">runs-on</span>:<span style="color:#bbb"> </span>ubuntu<span style="color:#099">-18.04</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">steps</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>actions/checkout@v2<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Install<span style="color:#bbb"> </span>Go<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>actions/setup-go@v2<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">with</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#bbb">          </span><span style="color:#000;font-weight:bold">go-version</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;^1.16.2&#34;</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Install<span style="color:#bbb"> </span>md<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">run</span>:<span style="color:#bbb"> </span>go<span style="color:#bbb"> </span>get<span style="color:#bbb"> </span>github.com/ruggi/md<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Build<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">run</span>:<span style="color:#bbb"> </span>md<span style="color:#bbb"> </span>build<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">name</span>:<span style="color:#bbb"> </span>Deploy<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">uses</span>:<span style="color:#bbb"> </span>peaceiris/actions-gh-pages@v3<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span>:<span style="color:#bbb"> </span>github.ref<span style="color:#bbb"> </span>==<span style="color:#bbb"> </span><span style="color:#d14">&#39;refs/heads/main&#39;</span><span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">with</span>:<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span style="color:#bbb">          </span><span style="color:#000;font-weight:bold">github_token</span>:<span style="color:#bbb"> </span>${{<span style="color:#bbb"> </span>secrets.GITHUB_TOKEN<span style="color:#bbb"> </span>}}<span style="color:#bbb">
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span style="color:#bbb">          </span><span style="color:#000;font-weight:bold">publish_dir</span>:<span style="color:#bbb"> </span>./.md/out<span style="color:#bbb">
</span></pre><h2 id="steps">Steps</h2>
<p>The steps are pretty simple:</p>
<ol>
<li>Install Go via <code>actions/setup-go@v2</code></li>
<li>Install md via <code>go get</code></li>
<li>Build the local folder</li>
<li>Deploy with <code>peaceiris/actions-gh-pages</code></li>
</ol>
<h2 id="repo-config">Repo config</h2>
<p>Once the action runs, it will publish the output folder (<code>./.md/out</code>) on the <code>gh-pages</code> branch. You can set that to be the target for the deployment in the <code>Pages</code> section of the repository's settings:</p>
<p><img src="/images/gh-pages-deploy.png" alt="settings" /></p>
</div>
    </div>
  </body>
</html>
